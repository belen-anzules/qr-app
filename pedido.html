<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<<<<<<< HEAD
<title>Resumen - Macro Fit</title>

<style>
:root { --primary:#4CAF50; --bg:#f8f9fa; --dark:#1a1a1a; --error:#ff4d4d; }

body {
    font-family:'Segoe UI', Roboto, sans-serif;
    background:var(--bg);
    margin:0;
    padding-bottom:140px;
    color:var(--dark);
}

/* HEADER */
header {
    background:white;
    padding:20px;
    display:flex;
    align-items:center;
    justify-content:space-between;
    position:sticky;
    top:0;
    z-index:100;
    box-shadow:0 2px 10px rgba(0,0,0,0.05);
}

.back-btn {
    background:#eee;
    border:none;
    width:45px;
    height:45px;
    border-radius:15px;
    font-size:1.2rem;
    cursor:pointer;
}

/* LISTA */
#pedido-lista { padding:15px; }

.cart-card {
    background:white;
    padding:18px;
    border-radius:25px;
    margin-bottom:15px;
    display:flex;
    justify-content:space-between;
    align-items:center;
    box-shadow:0 10px 20px rgba(0,0,0,0.03);
}

.cart-details strong { font-size:1.1rem; }
.cart-details p { font-size:0.85rem; color:#888; }

.price-tag {
    color:var(--primary);
    font-weight:800;
    margin-top:6px;
    display:block;
}

/* BOTONES */
.cart-actions { display:flex; gap:10px; }

.btn-action {
    border:none;
    padding:12px;
    border-radius:15px;
    font-size:1.1rem;
    cursor:pointer;
}

.btn-edit { background:#e8f5e9; color:var(--primary); }
.btn-del { background:#fff1f1; color:var(--error); }

/* FOOTER */
.footer-total {
    position:fixed;
    bottom:0;
    width:100%;
    background:white;
    padding:25px;
    border-radius:30px 30px 0 0;
    box-shadow:0 -15px 30px rgba(0,0,0,0.08);
}

.total-row {
    display:flex;
    justify-content:space-between;
    margin-bottom:20px;
}

.btn-confirm {
    background:var(--primary);
    color:white;
    border:none;
    width:100%;
    padding:20px;
    border-radius:20px;
    font-weight:800;
    cursor:pointer;
}

/* MODAL */
.modal {
    position:fixed;
    inset:0;
    background:rgba(0,0,0,0.6);
    display:none;
    justify-content:center;
    align-items:center;
    backdrop-filter:blur(10px);
}

.modal-content {
    background:white;
    padding:35px;
    border-radius:35px;
    width:88%;
    max-width:420px;
    text-align:center;
}

.input-group { text-align:left; margin-bottom:15px; }

.input-group label {
    font-size:0.7rem;
    font-weight:800;
    color:#aaa;
    text-transform:uppercase;
}

.modal-content input {
    width:100%;
    padding:16px;
    margin-top:6px;
    border:2px solid #f0f0f0;
    border-radius:18px;
    background:#fafafa;
}

/* VALIDACI√ìN UX */
.modal-content input.error {
    border-color:var(--error);
    box-shadow:0 0 0 4px rgba(255,77,77,0.15);
}

.modal-content input.success {
    border-color:var(--primary);
}
</style>
</head>

<body onload="render()">

<header>
    <button class="back-btn" onclick="irAMenu()">‚¨ÖÔ∏è</button>
    <h3>Confirmar Pedido</h3>
    <div style="width:45px"></div>
=======
<title>Confirmar Pedido</title>

<style>
:root { --primary:#4CAF50; --bg:#f8f9fa; --dark:#1a1a1a; }
body { font-family:Segoe UI,Roboto,sans-serif; background:var(--bg); margin:0; padding-bottom:140px; }
header { background:#fff; padding:20px; display:flex; justify-content:space-between; align-items:center; box-shadow:0 2px 10px rgba(0,0,0,.05); }
.back-btn { border:none; width:45px; height:45px; border-radius:15px; font-size:1.2rem; }
.cart-card { background:#fff; padding:18px; border-radius:25px; margin:15px; box-shadow:0 10px 20px rgba(0,0,0,.03); }
.footer-total { position:fixed; bottom:0; width:100%; background:#fff; padding:25px; border-radius:30px 30px 0 0; box-shadow:0 -15px 30px rgba(0,0,0,.08); }
.btn-confirm { width:100%; padding:20px; border:none; border-radius:20px; background:var(--primary); color:#fff; font-weight:800; }
.modal { position:fixed; inset:0; background:rgba(0,0,0,.6); display:none; justify-content:center; align-items:center; }
.modal-content { background:#fff; padding:30px; border-radius:30px; width:90%; max-width:420px; }
input { width:100%; padding:15px; margin-top:6px; border-radius:15px; border:2px solid #eee; }
</style>
</head>

<body>

<header>
<button class="back-btn" onclick="history.back()">‚¨ÖÔ∏è</button>
<h3>Confirmar Pedido</h3>
<div style="width:45px"></div>
>>>>>>> fefdc4672c3fefa2314019c2cb771ce81400fb3e
</header>

<div id="pedido-lista"></div>

<div class="footer-total">
<<<<<<< HEAD
    <div class="total-row">
        <span>Total Sugerido</span>
        <span>$<span id="total-global">0.00</span></span>
    </div>
    <button class="btn-confirm" id="btn-main" onclick="abrirRegistro()">FINALIZAR COMPRA üöÄ</button>
</div>

<!-- MODAL -->
<div id="modal-reg" class="modal">
<div class="modal-content">
    <h2>Tus Datos</h2>
    <p>Para tu ticket oficial de Macro Fit</p>
    <small>‚è±Ô∏è Este proceso toma menos de 1 minuto</small>

    <div class="input-group">
        <label>Nombre Completo</label>
        <input id="nom">
    </div>

    <div class="input-group">
        <label>C√©dula</label>
        <input id="ced">
    </div>

    <div class="input-group">
        <label>WhatsApp</label>
        <input id="tel">
    </div>

    <div class="input-group">
        <label>Direcci√≥n</label>
        <input id="dir">
    </div>

    <button class="btn-confirm" onclick="generarTicket()">GENERAR MI TICKET ‚ú®</button>
    <button onclick="cerrarModal()" style="background:none;border:none;color:#aaa;margin-top:15px;">Cancelar</button>
=======
<div style="display:flex; justify-content:space-between; margin-bottom:15px;">
<span>Total</span>
<strong>$<span id="total-global">0.00</span></strong>
</div>
<button class="btn-confirm" onclick="abrirRegistro()">FINALIZAR COMPRA üöÄ</button>
</div>

<div id="modal" class="modal">
<div class="modal-content">
<h2>Tus Datos</h2>

<input id="nom" placeholder="Nombre completo">
<input id="ced" placeholder="C√©dula">
<input id="tel" placeholder="Tel√©fono">
<input id="dir" placeholder="Direcci√≥n">

<button class="btn-confirm" onclick="generarTicket()">GENERAR TICKET</button>
<button style="margin-top:15px" onclick="cerrar()">Cancelar</button>
>>>>>>> fefdc4672c3fefa2314019c2cb771ce81400fb3e
</div>
</div>

<script>
<<<<<<< HEAD
function getCart(){
    const p=new URLSearchParams(location.search);
    try{
        return p.get("cart")?JSON.parse(decodeURIComponent(p.get("cart"))):[];
    }catch{return[]}
}

function render(){
    const cart=getCart();
    const lista=document.getElementById("pedido-lista");
    const btn=document.getElementById("btn-main");
    const totalSpan=document.getElementById("total-global");
    let total=0;

    if(cart.length===0){
        lista.innerHTML="<p style='text-align:center'>üõí Carrito vac√≠o</p>";
        btn.disabled=true;
        btn.style.opacity=0.4;
        return;
    }

    lista.innerHTML="";
    cart.forEach((item,i)=>{
        total+=parseFloat(item.total);
        lista.innerHTML+=`
        <div class="cart-card">
            <div class="cart-details">
                <strong>${item.nombre}</strong>
                <p>${item.extras||""}</p>
                <span class="price-tag">$${item.total}</span>
            </div>
           <div class="cart-actions">
    <button class="btn-action btn-edit"
        onclick="location.href='${item.page}?cart=${encodeURIComponent(JSON.stringify(cart))}&editIndex=${i}'">
        ‚úèÔ∏è
    </button>

    <button class="btn-action btn-del" onclick="eliminar(${i})">üóëÔ∏è</button>
</div>
        </div>`;
    });

    totalSpan.innerText=total.toFixed(2);
}

function eliminar(i){
    const cart=getCart();
    cart.splice(i,1);
    location.href="pedido.html?cart="+encodeURIComponent(JSON.stringify(cart));
}

function irAMenu(){
    location.href="menu.html?cart="+encodeURIComponent(JSON.stringify(getCart()));
}

function abrirRegistro(){ document.getElementById("modal-reg").style.display="flex"; }
function cerrarModal(){ document.getElementById("modal-reg").style.display="none"; }

function generarTicket(){
    const n=nom, c=ced, t=tel, d=dir;
    const campos=[n,c,t,d];
    let ok=true;

    campos.forEach(i=>{
        i.classList.remove("error","success");
        if(!i.value.trim()){ i.classList.add("error"); ok=false; }
        else i.classList.add("success");
    });

    if(!ok) return;

    const ticket={
        id:"MF-"+Math.floor(100000+Math.random()*900000),
        cliente:n.value,
        cedula:c.value,
        tel:t.value,
        dir:d.value,
        total:document.getElementById("total-global").innerText,
        fecha:new Date().toLocaleDateString(),
        hora:new Date().toLocaleTimeString([], {hour:'2-digit', minute:'2-digit'})
    };

    localStorage.setItem("ticketAPK",JSON.stringify(ticket));
    localStorage.setItem("ticketActual",JSON.stringify(ticket));
    localStorage.removeItem("carrito");

    location.href="ver-ticket.html";
}
=======
function getCart() {
    const p = new URLSearchParams(location.search);
    try {
        return JSON.parse(decodeURIComponent(p.get("cart"))) || [];
    } catch {
        return [];
    }
}

function render() {
    const cart = getCart();
    let total = 0;
    const lista = document.getElementById("pedido-lista");

    if (!cart.length) {
        lista.innerHTML = "<p style='text-align:center'>Carrito vac√≠o</p>";
        return;
    }

    cart.forEach(p => {
        total += parseFloat(p.total);
        lista.innerHTML += `
            <div class="cart-card">
                <strong>${p.nombre}</strong><br>
                <small>${p.extras || ''}</small><br>
                <strong>$${p.total}</strong>
            </div>
        `;
    });

    document.getElementById("total-global").innerText = total.toFixed(2);
}

function abrirRegistro() {
    document.getElementById("modal").style.display = "flex";
}
function cerrar() {
    document.getElementById("modal").style.display = "none";
}

function generarTicket() {
    const nom = nomInput.value.trim();
    const ced = cedInput.value.trim();
    const tel = telInput.value.trim();
    const dir = dirInput.value.trim();

    if (!nom || !ced || !tel || !dir) {
        alert("Completa todos los campos");
        return;
    }

    const ticket = {
        cod: "MF-" + Math.floor(100000 + Math.random() * 900000),
        nom, ci: ced, tel, dir,
        fec: new Date().toLocaleDateString(),
        hor: new Date().toLocaleTimeString([], {hour:'2-digit', minute:'2-digit'})
    };

    const url = "ver-ticket.html?" +
        `cod=${ticket.cod}&nom=${encodeURIComponent(ticket.nom)}` +
        `&ci=${ticket.ci}&tel=${ticket.tel}` +
        `&dir=${encodeURIComponent(ticket.dir)}` +
        `&fec=${ticket.fec}&hor=${ticket.hor}`;

    location.href = url;
}

const nomInput = document.getElementById("nom");
const cedInput = document.getElementById("ced");
const telInput = document.getElementById("tel");
const dirInput = document.getElementById("dir");

window.onload = render;
>>>>>>> fefdc4672c3fefa2314019c2cb771ce81400fb3e
</script>

</body>
</html>
